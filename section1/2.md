[toc]



# 2. Linux文件管理

## 1 Linux命令行學前準備

### 1.1 操作系統工作原理

- ⽤户操作的是shell，shell向内核请求资源，内核通過驅動調用硬件资源，硬件处理后回到shell，⽤户通过shell查看结果

![image-20230107194251776](D:\rhce8\section1\img\image-20230107194251776.png)

### 1.2 操作系統知識模塊概述

- ⽂件管理（⽂件CRUD） 
- 进程管理（进程CRUD） 
- 软件管理（软件CRUD） 
- 权限管理 
- 用戶管理（同时⼀个⽤户使用系统）
- 網絡络管理（设置網絡，配置ip，wifi，有线）
- 防火墻管理 
- 磁盘管理

### 1.3 調整終端軟件大小和字體

```bash
# GUI -> Open Terminal
Ctrl + Shift + "+"
Ctrl + "-"
```

### 1.4 Linux命令行基礎命令學習

```bash
# print string 
# -e - escape
echo "<string>"
echo -e "123\n456"

# caculator (interactive)
bc

# evaluate expression (non-interactive)
expr

# print date
date

# concatenate files and print on the standard output - STDOUT
cat <file>

# change hostname & check
hostnamectl set-hostname <name>
hostname
```

### 1.6 執行Linux命令最重要的三件事

```bash
# root       - 當前CLI的用戶
# @          - 分隔符
# RHEL8-RHCE - 當前系統的主機名
# tutorj     - 當前工作目錄
# #          - 特權用戶
# $          - 普通用戶
[root@RHEL8-RHCE tutorj]$

# 我是誰 - who am I?
whoami

# 我在哪 - where am I?
pwd

# 我要幹什麽 - what I'm gonna do?
```

## 2 Linux文件管理

### 2.1 [Linux FSH](https://www.tecmint.com/linux-directory-structure-and-important-files-paths-explained/)

<img src="https://helpdeskgeek.com/wp-content/pictures/2020/02/file-directory.png" alt="img" style="zoom:150%;" />

### 2.2 su

- `su` - switch user

    - 普通用戶 -> any都需要pwd
    - root -> any都不需要pwd

    ```bash
    # 不帶“-”，只是shell層面上的切換，用戶的環境變量實際上沒有變化
    # 所以無論如何都要帶上，將變量context也一并切換到指定用戶下去執行對應的指令
    su - <user>
    
    # same
    su -
    su - root
    ```

- 當前shell進行用戶切換的時候，實際上是在當前的shell基礎上再打開一個shell

  ```bash
  [root@RHEL8-RHCE ~]$ pstree | grep bash
          |-sshd-+-sshd---sshd---bash---sudo---bash---su---bash---su---bash-+-grep
[root@RHEL8-RHCE ~]$ exit
  logout
  [tutorj@RHEL8-RHCE ~]$ pstree | grep bash
          |-sshd-+-sshd---sshd---bash---sudo---bash---su---bash-+-grep
  [tutorj@RHEL8-RHCE ~]$ exit
  logout
  [root@RHEL8-RHCE tutorj]$ pstree | grep bash
          |-sshd-+-sshd---sshd---bash---sudo---bash-+-grep
  [root@RHEL8-RHCE tutorj]$ exit
  exit
  [tutorj@RHEL8-RHCE ~]$ pstree | grep bash
          |-sshd-+-sshd---sshd---bash-+-grep
  ```
  
- GUI

  ```bash
  # open a new terminal shell
  Ctrl + Shift + t 
  
  # switch between
  Alt + 1~9
  
  # close current terminal shell
  Ctrl + D
  ```

### 2.3 文件管理命令的知識概述

- 文件的增刪改查
- 文件的創建（文本文件/目錄文件）
  - 文件的刪除（文本文件/目錄文件）
  - 文件的修改（文件内容/屬性修改）
  - 文件的查看（文件内容/屬性查看）

### 2.4 絕對路徑 vs 相對路徑

- 絕對路徑 - staring with "/" - root directory
- 相對路徑 - not staring with "/" - root directory

### 2.5 cd

- `cd` - change directory

  ```bash
  # 切換到指定的絕對or相對路徑
  cd <path>
  
  # 切換到上級目錄
  cd ..
  
  # 切換到當前用戶的家目錄/home/<user>
  cd
  cd ~
  
  # 切換到上次所在的目錄
  cd -
  ```

### 2.6 ls

- `ls` - list directory contents

  ```bash
  # list current directory contents
  ls
  
  # list contents of a specific directory/multiple directories
  ls <path>
  ls <path1> <path2> ...
  
  # flags
  # -l - use a long listing format
  # -h - human readable
  # -t - sort by modification time, newest first
  # -r - reverse order while sorting
  # -a - do not ignore entries starting with .
  # -d - list directories themselves, not their contents
  ls -lhtra
  ```

  ```bash
  # 第1列 - 文件的種類
  # “-” - file
  # “d” - directory
  # “b” - block
  # “l” - link
  
  # 第2列-第10列
  # rwx/ugo - read/write/execute - user/group/others
  
  # 第11列
  # "." - 表示該文件具備SELinux的安全上下文
  # “+” - 表示該文件具備ACL
  
  # 第12列
  # 該文件具備的inode數
  
  # 第13-14列
  # 該文件的擁有者和所屬組
  
  # 第15列
  # 文件的大小，單位字節Byte，1024Byte = 1KB
  
  # 第16列
  # 時間 - month day hour:minute
  
  # 第17列
  # 文件名
  
  [tutorj@RHEL8-RHCE ~]$ ls -l /boot/
  total 303172
  -rw-r--r--. 1 root root    192091 Apr 29  2021 config-4.18.0-305.el8.x86_64
  -rw-r--r--. 1 root root    198582 Oct  1 00:12 config-4.18.0-425.3.1.el8.x86_64
  drwxr-xr-x. 3 root root        17 Dec  6 23:13 efi
  drwx------. 4 root root        83 Jan  9 20:51 grub2
  -rw-------. 1 root root  53091373 Dec 13 23:26 initramfs-4.18.0-305.el8.x86_64.img
  -rw-------. 1 root root  27527168 Dec 13 23:19 initramfs-4.18.0-305.el8.x86_64kdump.img
  -rw-------. 1 root root  52981123 Dec 13 23:25 initramfs-4.18.0-425.3.1.el8.x86_64.img
  -rw-------. 1 root root  27515904 Dec 25 13:36 initramfs-4.18.0-425.3.1.el8.x86_64kdump.img
  drwxr-xr-x. 3 root root        21 Dec  6 23:20 loader
  -rw-------. 1 root root   4164308 Apr 29  2021 System.map-4.18.0-305.el8.x86_64
  -rw-------. 1 root root   4405925 Oct  1 00:12 System.map-4.18.0-425.3.1.el8.x86_64
  -rwxr-xr-x. 1 root root  10026352 Dec  6 23:23 vmlinuz-0-rescue-00ec32d126cd42898a54ddfc9bf8f035
  -rwxr-xr-x. 1 root root  10026352 Apr 29  2021 vmlinuz-4.18.0-305.el8.x86_64
  -rwxr-xr-x. 1 root root  10743152 Oct  1 00:12 vmlinuz-4.18.0-425.3.1.el8.x86_64
  ```

### 2.7 cat/head/tail

- `cat` - concatenate files and print on the standard output - STDOUT

  ```bash
  # interactive keyword input -> STDOUT
  # Ctrl + D to exit
  cat 
  
  # print file content to STDOUT
  cat <file>
  
  # print file content to STDOUT show line number
  cat -n <file>
  ```

- `head` - output the first part of files

  ```bash
  # print 1st ten rows of content of file
  head <file>
  
  # print # of rows of content of file
  head -# <file>
  head -n <#> <file>
  ```

- `tail` - output the last part of files

  ```bash
  # print last 10 rows of content of file
  tail <file>
  
  # print last # of rows of content of file
  tail -# <file>
  tail -n <#> <file>
  
  # follow last 10 rows of content of file
  tail -f <file>
  ```

### 2.8 more/less

- `more` - file perusal filter for crt viewing

  - cat會一次性輸出文件内容到STDOUT，對於多行文件不友好
  - more可以進行分頁顯示，但不支持向前翻頁

  ```bash
  # paging display from top -> bottom
  # Enter - next row
  # Space - next page
  # q     - exit
  more <file>
  ```

- `less` - opposite of more

  - 支持向前翻頁

  ```bash
  # paging display from bottom -> top
  less <file>
  ```

### 2.9 touch/file

- `touch` - create a empty，change file timestamps

  ```bash
  # create a emtpy file
  touch <filename>
  ```

- `file` - determine file type

  ```
  # check type of file
  file <file>
  ```

### 2.11 mtime/atime/ctime

- `mtime` - 文件内容發生改變時，mtime會被更新（ls默認顯示）

- `atime` - 文件被訪問時，atime會被更新

- `ctime` - 文件狀態（屬性/權限）發生改變時，atime會被更新

  ```bash
  # mtime
  [tutorj@RHEL8-RHCE Desktop]$ ls -l file
  -rw-rw-r--. 1 tutorj tutorj 14 Jan 12 20:58 file
  # atime
  [tutorj@RHEL8-RHCE Desktop]$ ls -lu file
  -rw-rw-r--. 1 tutorj tutorj 14 Jan 12 20:58 file
  # ctime
  [tutorj@RHEL8-RHCE Desktop]$ ls -lc file
  -rw-rw-r--. 1 tutorj tutorj 14 Jan 12 20:58 file
  
  # stat shows more comprehensive
  [tutorj@RHEL8-RHCE Desktop]$ stat file
    File: file
    Size: 14              Blocks: 8          IO Block: 4096   regular file
  Device: fd00h/64768d    Inode: 18443824    Links: 1
  Access: (0664/-rw-rw-r--)  Uid: ( 1000/  tutorj)   Gid: ( 1000/  tutorj)
  Context: unconfined_u:object_r:user_home_t:s0
  Access: 2023-01-12 20:58:20.966646687 +0800
  Modify: 2023-01-12 20:58:16.305596286 +0800
  Change: 2023-01-12 20:58:16.324596492 +0800
   Birth: 2023-01-12 20:58:16.305596286 +0800
  ```

### 2.12 mkdir

- `mkdir` - make directories

  ```bash
  # create a diretory
  mkdir <path/directory name>
  
  # -p - make parent directories as needed
  mkdir -p <path1/path2/directory name>
  ```

### 2.13 rm/rmdir

- `rm` - remove files or directories

  ```bash
  rm <file or directory>
  
  # -i - prompt
  # root will prompt automatically
  rm -i <file or directory>
  
  # -f - force
  rm -f <file>
  
  # remove non-empty directory recursively
  rm -r <directory>
  
  # force remove file & directory recursively
  rm -rf <file or directory>
  ```

- `rmdir` - remove directory

  ```bash
  # directory must be empty
  rmdir <directory>
  ```

### 2.14 alias

- `alias` - command alias

  ```bash
  # list alias
  alias
  
  # set alias temporarily, it's gone once current shell is closed
  alias <alias>='<cmd>'
  
  # set permenantly - add entry to .bashrc
  vim .bashrc
  
  # root alias -> auto prompt for removal
  alias rm='rm -i'
  ```

### 2.15 cp

- `cp` - copy files and directories -> backup (admin only)

  ```bash
  # cp scr1 & src2 to destination directory
  cp <src1> <src2> ... <dst directory>
  
  # cp src to destination directory & rename to crs
  cp <src> <dst directory/crs>
  
  # -r - copy directory recursively
  cp -r <dir1> <dir2>
  
  # -a - keep ownership & permission when using root = admin 
  cp -a <dir1> <dir2>
  
  # root alias -> auto prompt for cp
  alias cp='cp -i'
  ```

### 2.16 mv

- `mv` - move/rename file

  ```bash
  # src will be gone
  mv <src> <dst directory/crs>
  
  # rename
  mv <file1> <file2>
  mv <dir1> <dir2>
  ```

### 2.17 wildcard

- `?` - 非空任意字符

  ```bash
  [tutorj@RHEL8-RHCE Desktop]$ touch aa
  [tutorj@RHEL8-RHCE Desktop]$ touch aa1
  [tutorj@RHEL8-RHCE Desktop]$ touch aa2
  # list aa[?]
  [tutorj@RHEL8-RHCE Desktop]$ ls aa?
  aa1  aa2
  
  # create a file named "abc?"
  [tutorj@RHEL8-RHCE Desktop]$ touch abc?
  [tutorj@RHEL8-RHCE Desktop]$ ls
   aa   aa1   aa2  'abc?'
   
  # escape 
  [tutorj@RHEL8-RHCE Desktop]$ touch a\?
  [tutorj@RHEL8-RHCE Desktop]$ ls
  'a?'   aa   aa1   aa2  'abc?'
  [tutorj@RHEL8-RHCE Desktop]$ touch a\\
  [tutorj@RHEL8-RHCE Desktop]$ ls
  'a?'  'a\'   aa   aa1   aa2  'abc?'
  ```

- `[]` - 匹配“[ ]”包含的其中一個字符

  - [a-z] - 匹配所有的小寫字母
  - [a-Z] - 匹配所有字母
  - [0-9] - 匹配所有數字

  ```bash
  [tutorj@RHEL8-RHCE Desktop]$ touch abc acc a1c ac
  [tutorj@RHEL8-RHCE Desktop]$ ls a[abcdefg]c
  abc  acc
  [tutorj@RHEL8-RHCE Desktop]$ ls a[123]c
  a1c
  
  [tutorj@RHEL8-RHCE Desktop]$ ls [ab]?
  ac
  
  [tutorj@RHEL8-RHCE Desktop]$ ls a[1b]c
  a1c  abc
  
  # ^ - 取非
  [tutorj@RHEL8-RHCE Desktop]$ ls a[^1b]c
  acc
  ```

- `*` - 匹配任意字符

  ```bash
  [tutorj@RHEL8-RHCE Desktop]$ ls a*
  a1c  abc  ac  acc
  
  [tutorj@RHEL8-RHCE Desktop]$ ls *b?
  abc
  ```

### 2.18 VI/VIM

- Mode

  - 命令模式 - 一定要確定好光標所在的位置！

    - `h/l` - left/right

    - `j/k` - down/up

    - `gg` - move to 1st line 1st row

    - `G` - to last row

    - `n+G` - to nth row

    - `x` - remove char where current cursor is on

    - `X` - remove char left to current cursor is on

    - `u` - undo

      

    - `dd` - delete the row where current cursor is

    - `<#>dd` - delete # number of rows below current cursor

    - `yy` - cp the row where current cursor is

    - `<#>yy` - copy # number of rows below current cursor

    - `p` - paste the content from `dd` or `yy` below to the row of current cursor

    - `P` - paste the content from `dd` or `yy` above to the row of current cursor

      

  - 插入模式

    - `i` - start to insert txt left to current cursor
    - `I` - start to insert txt to the head of row of current cursor 
    - `a` - start to insert txt left to current cursor
    - `A` - start to insert txt to the tail of row of current cursor 
    - `o` - start to insert txt to the next row of current cursor
    - `O` - start to insert txt to the upper row of current cursor

    ```bash
    # Practice - 到配置文件486行下另起一行，添加Listen 2233
    # command mode
    486+G
    # press o to enter insert mode, start to insert txt to next row 
    o
    ```

  - 末行模式

    - `/` - find string

      - highlight all matched
      - `n` - to next matched one
      - `N` - to last matched one

    - `:` - 

      - `w`  - save

      - `q`  - quit

      - `q!` - force to quit (wont't)

      - `x`  - save & quit

      - `wq` - save & quit

      - `set nu`   - show row number

      - `set nonu` - hide row number

        

      - replace 

        ```bash
        # <row1>,<row2>s/<old content>/<new content>/g
        # starting from row1 to row2, substitude all old content to new content
        # g - glbal
        # if no g, only susbstitude the 1st matched in each row
        
        # from row 5 to 10, substitude all 123 to 456
        :5,10s/123/456/g
        
        # starting
        :1,$s///
        :1,$s///g
        
        # from row 1 to last row, substitude all 1.1.1.1 to 2.2.2.2
        # $ - last row
        :1,$s/1.1.1.1/2.2.2.2/g
        
        # escapse - \ if had special char
        # from row 1 to last row, substitude all /opt/aaa to /etc/bbb
        :1,$s/\/opt\/aaa/\/etc\/bbb/g
        ```

  - 可視化模式

    - `v` - Visual
    - `V` - Visual Line
    - `Ctrl+v` - Visual Block

  

- 異常處理 - 多用戶同時操作一個文本文件

  ```bash
  E325: ATTENTION
  Found a swap file by the name ".hosts.swp"
            owned by: tutorj   dated: Wed Jan 11 20:45:00 2023
           file name: ~tutorj/hosts
            modified: YES
           user name: tutorj   host name: RHEL8-RHCE.local
          process ID: 4660 (still running)
  While opening file "hosts"
               dated: Tue Jan 10 21:35:27 2023
  
  (1) Another program may be editing the same file.  If this is the case,
      be careful not to end up with two different instances of the same
      file when making changes.  Quit, or continue with caution.
  (2) An edit session for this file crashed.
      If this is the case, use ":recover" or "vim -r hosts"
      to recover the changes (see ":help recovery").
      If you did this already, delete the swap file ".hosts.swp"
      to avoid this message.
  
  Swap file ".hosts.swp" already exists!
  [O]pen Read-Only, (E)dit anyway, (R)ecover, (Q)uit, (A)bort:
  ```

  

- 教程

  ```bash
  vimtutor
  ```

## 3 Linux重定向 & 管道

### 3.1 STDOUT(1)/STDERR(2)

- 無論命令結果成功與否默認輸出到當前shell屏幕（若shell關閉則輸出永久丟失）

  ```bash
  # STDOUT - /dev/stdout
  # >  - overwrite
  # >> - appened
  [tutorj@RHEL8-RHCE ~]$ cat /etc/hosts
  127.0.0.1   localhost localhost.localdomain localhost4 localhost4.localdomain4
  ::1         localhost localhost.localdomain localhost6 localhost6.localdomain6
  10.0.3.4    RHEL8-RHCE.local RHEL8-RHCE
  [tutorj@RHEL8-RHCE ~]$ cat /etc/hosts >> /dev/stdout
  127.0.0.1   localhost localhost.localdomain localhost4 localhost4.localdomain4
  ::1         localhost localhost.localdomain localhost6 localhost6.localdomain6
  10.0.3.4    RHEL8-RHCE.local RHEL8-RHCE
  
  # STDERR - /dev/stderr
  # >  - overwrite
  # >> - appened
  [tutorj@RHEL8-RHCE ~]$ cat /etc/hosts >> /dev/stderr
  127.0.0.1   localhost localhost.localdomain localhost4 localhost4.localdomain4
  ::1         localhost localhost.localdomain localhost6 localhost6.localdomain6
  10.0.3.4    RHEL8-RHCE.local RHEL8-RHCE
  
  # save cmd output to file
  <cmd> >  <file>
  <cmd> >> <file>
  # save cmd error to file
  <cmd> 2>  <file>
  <cmd> 2>> <file>
  # save both cmd output & error to file
  <cmd> &>  <file>
  <cmd> &>> <file>
  
  # redirect (meaningless or sensitive prints) to blackhole - /dev/null
  <cmd> &>> /dev/null
  ```

### 3.2 STDIN(0)

- 將原本由鍵盤的輸入，由文件來代替
- 可以將交互式命令轉換成交互式 -> :)script-friendly

- mail - send a mail

  ```bash
  # install
  [root@RHEL8-RHCE tutorj]$ dnf install evolution
  
  [root@RHEL8-RHCE tutorj]$ mail
  bash: mail: command not found...
  Install package 'mailx' to provide command 'mail'? [N/y] y
  
  # write a mail
  # -s - Subject
  [root@RHEL8-RHCE tutorj]$ mail -s "To tutorj" Tutorj
  Hello tutorj,
  
  This is root sending u the mail.
  
  Thanks!
  Elvis
  .
  EOT
  
  # check mail in tutorj
  [tutorj@RHEL8-RHCE ~]$ mail
  ```

  ```bash
  # <  - can only pass file (content) as input
  # letter as input to mail
  mail -s "To tutorj" < to_tutorj.letter
  
  # yes as input to cp 
  [tutorj@RHEL8-RHCE ~]$ echo y > yes
  [root@RHEL8-RHCE tutorj]$ cp /etc/hosts . < yes
  cp: overwrite './hosts'? [root@RHEL8-RHCE tutorj]$ 
  
  
  # << - end of file
  [tutorj@RHEL8-RHCE ~]$ mail -s "To tutorj" << EOF
  > Hello tutorj,
  > This is root tryting <<
  > Thanks!
  > Elvis
  > EOF
  
  # 
  [tutorj@RHEL8-RHCE ~]$ cat > config << EOF
  > This is a config file.
  > EOF
  [tutorj@RHEL8-RHCE ~]$ cat config
  This is a config file.
  ```

### 3.3 | 

- 管道的右側總是接受輸入的命令，其本質都是輸入重定向，後面跟著文件，將為文件的内容作爲輸入

  - mail
  - cat
  - head/tail
  - more/less

  ```bash
  # output of cmd1 as input to cmd2
  <cmd1> | <cmd2>
  
  [tutorj@RHEL8-RHCE ~]$ ls
  aaa  authorized_keys  config  Desktop  Documents  Downloads  hosts  log-261222-100207.log  Music  Pictures  Public  regex_practice.txt  Templates  Videos  
  [tutorj@RHEL8-RHCE ~]$ ls | cat
  aaa
  authorized_keys
  config
  Desktop
  Documents
  Downloads
  hosts
  log-261222-100207.log
  Music
  Pictures
  Public
  regex_practice.txt
  Templates
  Videos
  
  # output of "echo 123" as input to mail
  [tutorj@RHEL8-RHCE ~]$ echo 123 | mail -s "to tutorj" tutorj
  [tutorj@RHEL8-RHCE ~]$
  
  
  [tutorj@RHEL8-RHCE ~]$ cat << EOF
  > test
  > EOF
  test
  [tutorj@RHEL8-RHCE ~]$ head << EOF
  > test
  > EOF
  test
  [tutorj@RHEL8-RHCE ~]$ more << EOF
  > test
  > EOF
  test
  
  
  [tutorj@RHEL8-RHCE Desktop]$ echo "123" > file
  # output of ls as input to cat = cat (waiting input) then enter "file"
  [tutorj@RHEL8-RHCE Desktop]$ ls | cat
  file
  # output of ls as argument to cat = cat file
  [tutorj@RHEL8-RHCE Desktop]$ ls | xargs cat
  123
  ```

### 3.4 grep

- `grep` - print lines matching a pattern

  ```bash
  # grep PATTERN [FILE...] - 注意必須要是文件
  [tutorj@RHEL8-RHCE Desktop]$ grep root /etc/passwd
  root:x:0:0:root:/root:/bin/bash
  operator:x:11:0:operator:/root:/sbin/nologin
  
  
  # -i - ignore case
  # -v - Invert the sense of matching
  # -A - Print NUM lines of trailing context after matching lines
  # -B - Print NUM lines of leading context before matching lines
  # -n - show line number
  # -E - regular expression
  
  
  # grep is also waiting for input 
  [tutorj@RHEL8-RHCE Desktop]$ grep a
  
  hello
  
  happy
  happy   # "a" is hightlighted
  
  [tutorj@RHEL8-RHCE Desktop]$
  
  # output of ls as input to grep then filter "i" = find file or directory which contains "i"
  [tutorj@RHEL8-RHCE Desktop]$ ls | grep i
  file
  # output of ls as argument = grep 1 file
  [tutorj@RHEL8-RHCE Desktop]$ ls | xargs grep 1
  123
  # which equals to 
  [tutorj@RHEL8-RHCE Desktop]$ grep 1 file
  123
  
  
  # print file & show last 10 rows
  cat file | tail
  # print file & show 1st 3 rows
  cat file | head -3
  ```

### 3.5 regex

- regular expression （匹配文件内容，也可以匹配文件名但是部分規則是沒有的） vs 通配符（匹配文件名）

  ```bash
  # ^ - starting with 
  [tutorj@RHEL8-RHCE Desktop]$ grep a file
  aab
  abc
  ea
  af
  [tutorj@RHEL8-RHCE Desktop]$ grep ^a file
  aab
  abc
  af
  
  # $ - end with
  [tutorj@RHEL8-RHCE Desktop]$ grep a file
  aab
  abc
  ea
  af
  [tutorj@RHEL8-RHCE Desktop]$ grep a$ file
  ea
  
  # starting with a & end with b
  [tutorj@RHEL8-RHCE Desktop]$ grep ^a file | grep b$
  aab
  
  # . - 匹配任意一個非空字符
  [tutorj@RHEL8-RHCE Desktop]$ grep a file
  aab
  abc
  ea
  af
  [tutorj@RHEL8-RHCE Desktop]$ grep a. file
  aab
  abc
  af
  
  # .* - 匹配任意一個非空字符串 = 1~n個.
  [tutorj@RHEL8-RHCE Desktop]$ grep a file
  aab
  abc
  ea
  af
  [tutorj@RHEL8-RHCE Desktop]$ grep .* file -n
  grep: ..: Is a directory
  file:1:aab
  file:2:abc
  file:3:ea
  file:4:af
  
  # .? - 匹配任意2個非空字符 = 重複前面的字符1次或0次
  # .? = ..
  [tutorj@RHEL8-RHCE Desktop]$ grep .? file -n
  1:aab
  2:abc
  3:ea
  4:af
  
  # filter out all commented
  grep "^#" /etc/chrony.conf -v -n
  
  # filter out all commented & empty line
  grep "^#" /etc/chrony.conf -v | grep -v ^$ -n
  ```

### 3.6 Linux Help

- `man` - an interface to the on-line reference manuals
- `info` - read Info documents
- help
- RHEL Offical Doc
- Search Engine

### 3.7 Short-cut

- `Ctrl+l` - clear 

- `Ctrl+a` - move cursor to left most

- `Ctrl+e` - move cursor to right most

- `Ctrl+u` - remove content from current cursor to left most

- `Ctrl+y` - resume removal

- `Ctrl+w` - remove one word

  

- `↑` - list last cmd

- `↓` - list next cmd


### 3.8 history

- `history` - list cmd history

  ```bash
  # list history command
  [root@RHEL8-RHCE Desktop]$ history | tail -5
    838  Thanks!
    839  Elvis
    840  EOF
    841  exit
    842  history | tail -5
  
  # show command date
  # %F - Equivalent to %Y - %m - %d
  # %T - Replaced by the time ( %H : %M : %S )
  [root@RHEL8-RHCE Desktop]$ export HISTTIMEFORMAT='%F %T  '
  [root@RHEL8-RHCE Desktop]$ history | tail -5
    840  2023-01-12 21:44:26  EOF
    841  2023-01-12 21:44:26  exit
    842  2023-01-12 21:50:28  history | tail -5
    843  2023-01-12 21:51:22  export HISTTIMEFORMAT='%F %T  '
    844  2023-01-12 21:51:24  history | tail -5
  
  # ignore history cmd, : to separate
  export HISTIGNORE='ls -l:pwd:date:'
  
  # ignore duplicate cmd
  export HISTCONTROL=ignoredups
  
  # unset export
  unset export HISTCONTROL
  
  # save export permanently & make it effective
  [tutorj@RHEL8-RHCE ~]$ vi .bash_profile
  [tutorj@RHEL8-RHCE ~]$ cat .bash_profile | grep HIST
  export HISTTIMEFORMAT='%F %T  '
  [tutorj@RHEL8-RHCE ~]$ source .bash_profile
  
  # list specific user's executed command
  # each user keeps .bash_profile under /home/<user>
  [tutorj@RHEL8-RHCE ~]$ vi .bash_profile
  
  # disable history storing
  export HISTSIZE=0
  
  # clear history
  [tutorj@RHEL8-RHCE ~]$ history -c
  [tutorj@RHEL8-RHCE ~]$ history
      1  2023-01-12 21:58:51  history
  
  # search lastly executed command
  Ctrl + r
  (reverse-i-search)`hi': history 
  Press 'Enter'
  
  # recall last exectuted cmd
  [tutorj@RHEL8-RHCE ~]$ !1
  history
      1  2023-01-12 21:58:51  history
  
  # !l - execute latest cmd starting with "l"
  [tutorj@RHEL8-RHCE ~]$ !l
  ll
  total 44
  ```
